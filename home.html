<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="./img/grid-globe-map-png.webp" type="image/x-icon">
  <link rel="stylesheet" href="./style.css">
  <link rel="stylesheet" href="./home.css">
  <title>TITAN BANK || Home</title>
</head>

<body>
  <!-- <h1>HOMEPAGE is coming soon!!</h1> -->
  <main>
    <div class="big-wrapper light">
      <img src="./img/shape.png" alt="" class="shape" />

      <header>
        <div class="container">
          <div class="logo">
            <!-- <img src="./img/logo.png" alt="Logo" /> -->
            <h3>Titan Bank</h3>
          </div>

          <div class="links">
            <ul>
              <!-- <li><a href="#">Features</a></li>
              <li><a href="#">Pricing</a></li>
              <li><a href="#">Testimonials</a></li> -->
              <li><a href="/" class="btn">Sign out</a></li>
            </ul>
          </div>

          <div class="overlay"></div>

          <div class="hamburger-menu">
            <div class="bar"></div>
          </div>
        </div>
      </header>

      <div class="showcase-area">
        <div class="container">
          <div class="left">
            <div class="big-title">
              <h2 style="margin-top: 40px;">Welcome Admin</h2>
              <p class="text">Check every motion detected by the camera</p>
              <!-- <h1>Start Exploring now.</h1> -->
            </div>
          </div>
        </div>
        <div class="container1">
          <div class="motion-list">


          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    let main = document.querySelector(".motion-list")
    let body = document.querySelector("html")
    //   fetch('').then((res) => {

    //     return res.json()
    //   }).then((data) => {
    //     console.log(data)
    //     internss = data;
    //     console.log(internss);
    //     data.data.forEach((element, i) => {
    //       let card = document.createElement("div");
    //       card.classList.add("interns-card");

    //       let containerContent =
    //         ` <div class="">
    //             <div class="interns-card__image">
    //               <img src="${element.image}" alt="">
    //             </div>
    //           </div>
    // </div>`
    //       card.innerHTML = containerContent;
    //       main.appendChild(card);
    //     })
    //   })


    fetch('https://motion-detection-backend-production.up.railway.app/api/all-captures/', {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': "Token " + newQueryString("token"),
      }
    }).then((res) => {
      return res.json()
    }).then((data) => {
      console.log(data)
      let motions = data;
      data.captures.forEach((element, i) => {
        let card = document.createElement("div");
        card.classList.add("interns-card");

        let containerContent =
          ` <div class="">
                <div class="interns-card__image">
                  <img src="${element.image}" alt="">
                  <h5>Captured At: ${element.created_at}</h5>
                </div>
              </div>
    </div>`
        card.innerHTML = containerContent;
        main.appendChild(card);
      })
    });


    function newQueryString(a) {
      var test = window.location.href;
      var testArr = test.split("#");
      test = testArr[0];
      var findstr = (a + '=');
      if (test.indexOf(findstr) != -1) {
        test = test.substring(test.indexOf(findstr) + findstr.length);
        if (test.indexOf('&') != -1) {
          test = test.substring(0, test.indexOf('&'));
        }
        return decodeURIComponent(test);
      }
      return "";
    }


  </script>

</body>

</html>